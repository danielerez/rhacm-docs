[#cleanup-reinstall]
== Cleaning up artifacts before reinstalling

Before you reinstall {acm} on a cluster or a previous version was installed and then deleted, you might need to remove artifacts.
//how do they know if they need to remove artifacts?

**Required access:** Cluster administrator. 

**{ocp-short} Dedicated environment required access:** You must have `cluster-admin` permissions.

[#prereqs-reinstall]
== Prerequisites

- You are using the same cluster access as the install connnected or disconnected guides require.
//need some clarity on this line and are there any other prereqs?

[#cleanup-artifacts]
== Cleaning up artifacts

Remove remaining artifacts by running the clean-up script. You need to clean up remaining artifacts if you plan to reinstall with an older version of {acm-short} on the same cluster. 

. Copy the following script into a file, replacing `<namespace>` in the script with the name of the namespace where you installed {acm-short} previously. 

+
*Important:* Ensure that you specify the correct namespace because the namespace is also cleaned out and deleted.

+
[source,bash]
----
#!/bin/bash
ACM_NAMESPACE=<namespace>
oc delete mch --all -n $ACM_NAMESPACE
oc delete apiservice v1.admission.cluster.open-cluster-management.io v1.admission.work.open-cluster-management.io
oc delete clusterimageset --all
oc delete clusterrole multiclusterengines.multicluster.openshift.io-v1-admin multiclusterengines.multicluster.openshift.io-v1-crdview multiclusterengines.multicluster.openshift.io-v1-edit multiclusterengines.multicluster.openshift.io-v1-view open-cluster-management:addons:application-manager open-cluster-management:admin-aggregate open-cluster-management:cert-policy-controller-hub open-cluster-management:cluster-manager-admin-aggregate open-cluster-management:config-policy-controller-hub open-cluster-management:edit-aggregate open-cluster-management:iam-policy-controller-hub open-cluster-management:policy-framework-hub open-cluster-management:view-aggregate
oc delete crd klusterletaddonconfigs.agent.open-cluster-management.io placementbindings.policy.open-cluster-management.io policies.policy.open-cluster-management.io userpreferences.console.open-cluster-management.io discoveredclusters.discovery.open-cluster-management.io discoveryconfigs.discovery.open-cluster-management.io
oc delete mutatingwebhookconfiguration ocm-mutating-webhook managedclustermutators.admission.cluster.open-cluster-management.io multicluster-observability-operator
oc delete validatingwebhookconfiguration channels.apps.open.cluster.management.webhook.validator application-webhook-validator multiclusterhub-operator-validating-webhook ocm-validating-webhook multicluster-observability-operator multiclusterengines.multicluster.openshift.io
----

. Run the script to remove any possible artifacts that remain from the previous installation. 

When you receive a message is returned that no resources were found you can proceed with the installation.
