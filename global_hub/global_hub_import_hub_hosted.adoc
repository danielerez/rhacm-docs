[#global-hub-importing-in-hosted-mode]
= Importing a managed hub cluster in the hosted mode (Technology Preview)

Import a managed hub cluster in the hosted mode to import any managed hub clusters where you want to have `local-cluster` enabled.
//this is a very confusing line. 

[#global-hub-importing-prereq]
== Prerequisites

- Enable `local-cluster` in the {global-hub} cluster.

[#global-hub-importing-hosted-mode]
== Importing a hub cluster in the hosted mode 

To import an existing hub cluster that has `local-cluster` enabled, you must use the hosted mode. Complete the following step: 

- Set the annotation `global-hub.open-cluster-management.io/import-cluster-in-hosted=true` to `globalhub cr`.
//set this where? We normally give them a file or a sample to set this; normally: Go to (or create) x file, set the y spec to z. We don't tell the user where they are doing this.

With this annotation, {global-hub} does the following actions:

- Imports all the new managed hub clusters in hosted mode.
- Disables the following `addons` in the new managed hub clusters namespaces: `applicationManager`, `certPolicyController`, and `policyController`. 
- Changes the managed hub clusters `addons` that are related to the new namespace, including: `work-manager`,`cluster-proxy`, and `managed-serviceaccount`. 
- Changes these namespaces to `open-cluster-management-global-hub-agent-addon`. 

*Notes:*

- In the hosted mode, you only get support for import managed hub clusters that use `kubeconfig` or API tokens. {acm} uses this `kubeconfig` or API token to generate the `auto-import-secret`, which connects to the managed hub cluster.
- Make sure this `kubeconfig` or API token is always usable. If it expires, regenerate the `auto-import-secret` in the managed hub cluster namespace, `oc create secret generic auto-import-secret --from-file=kubeconfig=./managedClusterKubeconfig -n <Managedhub Namespace>`
//Should this be earlier in the file for better UX? Maybe as a prereq?
